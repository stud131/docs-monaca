---
title: バックエンドの操作
weight: 20
aliases: /ja/backend/manual/control_operations/
---

Monaca バックエンドでは、バックエンド管理パネルを使用して、以下の 4 つの項目を実行することができます。

- [ユーザー管理](#ユーザー管理)
- [コレクション管理](#コレクション管理)
- [メールテンプレートの管理](#メールテンプレートの管理)
- [プッシュ通知](/ja/products_guide/push_notification/overview)

## ユーザー管理

バックエンド管理パネル上では、ユーザー関連のデータを手動で操作できます。

### ユーザーの新規追加

1.  バックエンド管理パネルから、`ユーザー管理` を選択し、{{<guilabel name="ユーザー追加">}} をクリックします。

    {{<img src="/images/backend/backend_operations/1.png">}}

2.  ユーザー情報 ( ユーザー名、パスワード、プロパティー )
    を入力して、{{<guilabel name="追加する">}}ボタンをクリックします。

    {{<img src="/images/backend/backend_operations/2.png">}}

    {{<note>}}
        正しい JSON の記法を使用して、プロパティーを記述してください。プロパティーの記述が正しくない場合、エラーが出力されます。
    {{</note>}}

3.  新規ユーザーが正常に追加された場合は、新しいレコードが表示されます。

    {{<img src="/images/backend/backend_operations/3.png">}}

4. デフォルトでは、 `Oid`、` ユーザー名`、 `パスワード`、` 作成日時`、`更新日時` のレコードに必要な列が 5 つだけ表示されます。 他の列を表示する場合は、{{<guilabel name = "+">}} アイコンをクリックしてください。

    {{<img src="/images/backend/backend_operations/4.png">}}

5. 表示する列を選択し、 {{<guilabel name="追加する">}} をクリックします。

    {{<img src="/images/backend/backend_operations/5.png">}}

6. 追加した列が表示されます。 

    {{<img src="/images/backend/backend_operations/6.png">}}

### ユーザーのプロパティーの更新

1.  編集対象のユーザーレコードをクリックすると、プロパティーの内容が表示されます。

    {{<img src="/images/backend/backend_operations/7.png">}}

2.  ユーザーのプロパティーを更新します。更新時には、正しい JSON
    の記法を使用します。設定を変更後、 {{<guilabel name="更新する">}} をクリックします。

    {{<note>}}
        プロパティーの追加と更新はできますが、削除はできません ( 削除後、更新すると再び表示されます )。また、システム側で使用するプロパティーは、原則、更新できません ( 「 _ 」 で始まるプロパティーがシステムプロパティーです。たとえば、「_createdAt 」、「 _id 」 などがあります )。ただし、「 _username 」 だけは、更新することができます。
    {{</note>}}

### ユーザーの削除

1.  削除するユーザーのレコードにチェックを入れます (複数選択可)。

2.  {{<guilabel name="ユーザー削除">}} をクリックします。

    {{<img src="/images/backend/backend_operations/8.png">}}

{{<warning>}}
    データをいったん削除してしまうと復旧できません。データを削除する場合には、ご注意ください。
{{</warning>}}

## コレクション管理

「 コレクション 」とはデータの集合体を意味します。データに対するパーミッション ( 権限 )をユーザー別に設定できるので、アプリ内で使うデータを適切に管理できます。設定可能なパーミッションには、`作成`、`アクセス許可`、`編集`、`削除`、`読み取り専用` の 5 種類があります。

ここでは、`Fruits` コレクションの管理方法を解説します。例として、`_id`、`name` ( 名前 )、`color` ( 色 )、`taste` ( 味 )を、プロパティーの項目として使用します。データの行を `コレクションアイテム` と呼びます ( 例 : lemon、yellow、sour の行)。コレクションアイテムの集合体を、 `コレクション`と呼びます。データベースの用語を借りると、コレクションはテーブル、コレクションアイテムはレコードとなります。

コレクションアイテムには、アンダースコア ( 「 `_` 」 )で始まる、システムプロパティーが複数あります。たとえば、 `_Oid`は、システムプロパティーであり、コレクションアイテムを識別する一意の IDです。

| _Oid | name | color | taste |
|-----|------|-------|-------|
| 00001abc | apple | red | sweet |
| 00002def | orange | orange | sour-sweet |
| 00003ghi | lemon | yellow | sour |

### コレクションの新規作成

1.  バックエンド管理パネルから、コレクション追加アイコンをクリックします（下図参照）。

    {{<img src="/images/backend/backend_operations/9.png">}}

2.  [コレクションの作成] ダイアログが表示されます。コレクションに関する情報を入力してください。

    - `コレクション名`：コレクションの名前を入力します。
    - `コレクションのセキュリティ`：{{<guilabel name="JavaScript からのアイテム追加を許可する">}} にチェックを入れた場合は、アプリからのコレクションへのデータ挿入を許可します。
    - `新規アイテムのパーミッション初期値`：{{<guilabel name="read">}} または {{<guilabel name="write">}} にチェックを入れ、新規アイテムに対して、読み取り または/および 書き込みパーミッション ( 権限 ) を与えるか選択します ( 対象はすべてのユーザーとなります )。

    {{<img src="/images/backend/backend_operations/10.png">}}

    3. {{<guilabel name="追加する">}} ボタンをクリックしてください。 

### コレクションアイテムの新規追加

コレクションを作成後、次のようにコレクションアイテムを追加することができます。

1.  バックエンド管理パネル上で、アイテムを追加するコレクションを選択します。次に、{{<guilabel name="アイテム追加">}} をクリックします。

    {{<img src="/images/backend/backend_operations/11.png">}}

2.  コレクションアイテムのデータを、JSON 形式で入力して、{{<guilabel name="追加する">}} ボタンをクリックします。上記の表に示すように、他の2つの項目を引き続き追加します。

    {{<img src="/images/backend/backend_operations/12.png">}}

3.  新しい項目が正常に追加されると、新しいレコードが表示されます。 デフォルトでは、レコードのシステムプロパティのみが表示されます。 他の列を表示/非表示にする場合は、[レコードの項目 ( 列 ) の表示・非表示](../control_panel/#show-hide-columns-of-records) を参照してください。

    {{<img src="/images/backend/backend_operations/13.png">}}

### コレクションアイテムの更新

1. 更新するアイテムを選択します。次に、アイテムのプロパティーが表示されます。

2.  正しい JSONの記法を使用して、アイテムのプロパティーを更新します。ここでは、`lemon` から `banana` へ、`sour` から `sweet` へ編集します。

    {{<img src="/images/backend/backend_operations/14.png">}}

{{<note>}}
    プロパティーの追加と更新はできますが、削除はできません ( 削除後、更新すると再び表示されます )。また、システム側で使用するプロパティーは、更新できません ( 「 _ 」 で始まるプロパティーがシステムプロパティーです。たとえば、「 _createdAt 」、「 _id 」 などがあります )。
{{</note>}}

### コレクションアイテムの削除

1.  削除するアイテムにチェックを入れます。

2.  {{<guilabel name="アイテム削除">}} をクリックします。削除を確認するメッセージが表示されます。

    {{<img src="/images/backend/backend_operations/15.png">}}

{{<warning>}}
    データをいったん削除してしまうと復旧できません。データを削除する場合には、ご注意ください。
{{</warning>}}

### コレクションアイテムに付与したパーミッションの変更

コレクションアイテム毎、ユーザー毎に、パーミッションを変更することができます。ユーザーには 2 種類あります。

1.  「 所有者 」
    は、コレクションを作成したユーザーを指します。所有者には、read (
    読み取り )・write ( 書き込み ) のパーミッションが常に付与されます。

2.  「 public 」 は、「 現在ログインしていない、すべてのユーザー 」
    を指します。デフォルトでは、これらのユーザーには、どちらのパーミッション
    ( read と write ) も付与されていません。

ユーザーのパーミッションをコレクションアイテム毎に変更する方法を、次に記します。

1.  対象のアイテムに表示された
    {{<guilabel name="パーミッション">}} アイコンをクリックします。

    {{<img src="/images/backend/backend_operations/16.png">}}

2.  特定の種類のユーザーのコレクションアイテム毎にアクセス許可を変更することができます。特定のユーザーに対して特定のアクセス許可を設定することもできます。バックエンドに複数のユーザーがいる場合は、コンボボックスにユーザーのリストが表示され、選択することができます。

    {{<img src="/images/backend/backend_operations/17.png">}}

3.  {{<guilabel name="保存する">}} ボタンをクリックします。

### コレクションの削除

1.  バックエンド管理パネルから、削除するコレクションを右クリックし、[コレクションを削除] を選択します。

    {{<img src="/images/backend/backend_operations/18.png">}}

2.  削除を確認するメッセージが表示されます。

##  プッシュ通知管理

[プッシュ通知](/ja/products_guide/push_notification/overview) を参照してください。

## メールテンプレートの管理

アプリのユーザー宛に送信する電子メールのテンプレートを作成・編集できます。

1.  バックエンド管理パネル上で、{{<guilabel name="メールテンプレート">}} を選択します。

2.  メールテンプレートの編集・追加を行うことができます。

    {{<img src="/images/backend/backend_operations/19.png">}}

3.  テンプレートの作成・編集後、{{<guilabel name="適用">}} ボタンをクリックします。

{{<note>}}
    メールテンプレートの作成・編集を行えるのは、Monaca クラウド IDE上だけです。
{{</note>}}
