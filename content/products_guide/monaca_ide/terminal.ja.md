---
title: ターミナル機能
weight: 25
---

MonacaクラウドIDEにはターミナル機能が備わっています。ターミナル機能は、プレビュー用アプリケーションを表示するためのHTTPサーバーを実行するために使用されます。また、Linuxコンテナを通じてプロジェクトを操作することもできます。

この章では、MonacaクラウドIDEの持つターミナル機能について説明します。

{{<note>}}
    本機能はすべてのMonaca利用者にご利用いただけます。しかしながら、2018年第3四半期以降はFreeプランのユーザーには制限が加わる予定となっておりますのでご了承ください。
{{</note>}}

## ターミナル機能とは

ターミナル機能は、下記の2つのコンソール画面から構成されます。

1. `プレビューログ` タブ: プレビュー画面を表示するためのHTTPサーバーが出力されます
2. `ターミナル` タブ: 任意のコマンド（git、npm、cordova、monacaや多くのUNIXコマンド）を実行するためのターミナル画面です

クラウドIDEが開始されると、Linuxコンテナが自動的に作成されます。コンテナは複数のユーザーで共有されるため、一部のコマンドや操作に制限が加わっています。

クラウドIDEを閉じると、コンテナも削除されます。コンテナ内のデータが削除されることを防ぐため、次の章をお読みください。

### ストレージとディレクトリ

コンテナ内で作成されるファイルは、下記のディレクトリを除きコンテナが削除された際に失われます。

- `/home/terminaluser`: ユーザーのホームディレクトリ。すべてのプロジェクトで共有されます

- `/project`: プロジェクトのルートディレクトリ

## ターミナル機能を使う

### ターミナルの起動

はじめてMonacaクラウドIDEでプロジェクトを開いた際に、下記の設定が自動的に適用されます。

- `package.json` が含まれる場合は `npm install` が実行され、必要なNPMモジュールが組み込まれます。

- プロジェクトがトランスパイルできる場合、 `monaca reconfigure` コマンドを用いてホームディレクトリに必要なビルドツールをインストールします。

### プレビューログとプレビューサーバー

プレビューログのタブには、プレビューサーバーの出力が表示されます。デフォルトでは `monaca preview` コマンドが使用されますが、ギアのアイコンをクリックすることでプレビューサーバーの設定を変更することができます。

{{<figure src="/images/monaca_ide/manual/terminal/gear_icon.png" >}}

プレビューサーバーがHTTPリクエストを受け付けると、プレビューアプリが読み込まれます。デフォルトのポート番号は `8080` となりますが、 `8081` から`8084` までの範囲で変更できます。

{{<figure src="/images/monaca_ide/manual/terminal/settings.png" >}}

### 新しいターミナルを開く

新しいターミナル画面を開くには、プラスボタンをクリックし、 {{<guilabel name="新規ターミナル">}} を選択します。

{{<figure src="/images/monaca_ide/manual/terminal/open_new_terminal.png" >}}

### ターミナルのカスタマイズ

ターミナル機能は [Tmux](https://github.com/tmux/tmux/wiki) と呼ばれるターミナルマルチプレクサーを用いています。デフォルトのTmux設定を変更するには、 `~/.tmuxrc` ファイルを編集してください。

ターミナル機能の設定の変更は、 {{<menu menu1="設定" menu2="ワークスペース設定">}} から行えます。

{{< figure src="/images/monaca_ide/manual/terminal/terminal_configuration.png" >}}

### スクロールモード

ターミナル画面をスクロールした際に、右上に行番号が表示されます。これは `スクロールモード` であることを表しています。スクロールモードから戻るには、 `Ctrl-C` や `ESC` キーをタイプしてください。

{{<figure src="/images/monaca_ide/manual/terminal/scroll_mode.png" >}}

## よくある質問/トラブルシューティング

いくつか既知の不具合や制限があります。

### Adブロッカーを設定したブラウザー

ターミナル機能は、サードパーティCookieを使用しています。そのため、一部のブラウザー拡張（Adブロッカー等）やブラウザーの設定が有効になっていると、ターミナル機能を利用することができません。その場合は、Adブロッカーの設定を無効にし、サードーパーティCookieを有効にしてください。

### 機能の制限

いくつかのコマンドや操作やセキュリティの理由から制限されています。問題が見つかった場合は、Monacaチームにお問い合わせください。
